apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: production

bases:
  - ../../base/common

resources:
  - flaskapp/
  - mysql/
  - ingress.yaml
  - namespace.yaml

patches:
  - patch: |-
      apiVersion: v1
      kind: LimitRange
      metadata:
        name: flaskapp-limits
      spec:
        limits:
        - default: 
            cpu: 500m
            memory: 512Mi
          defaultRequest:
            cpu: 250m
            memory: 256Mi
          max:
            cpu: "1"
            memory: 1Gi